<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Thesis Progress Tracker</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-white">
  <div id="root"></div>
  <script type="text/babel">
// --- Confetti Component ---
function Confetti({ show }) {
  if (!show) return null;
  const confetti = Array.from({ length: 30 }, (_, i) => (
    <span key={i} style={{
      position: 'absolute',
      left: `${Math.random() * 100}%`,
      top: `${Math.random() * 100}%`,
      fontSize: `${24 + Math.random() * 24}px`,
      animation: `fall 2.5s linear ${Math.random()}s 1`,
      pointerEvents: 'none',
    }}>
      {['ğŸ‰','âœ¨','ğŸ”¥','ğŸŠ','ğŸ¥³','ğŸ§¡'][Math.floor(Math.random()*6)]}
    </span>
  ));
  return (
    <div className="fixed inset-0 z-50 pointer-events-none" style={{overflow:'hidden'}}>
      {confetti}
      <style>{`
        @keyframes fall {
          0% { transform: translateY(-40px) rotate(0deg); opacity: 1; }
          100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }
      `}</style>
    </div>
  );
}

// --- Dataset Section ---
function DatasetSection() {
  const [files, setFiles] = React.useState([]);
  const [selected, setSelected] = React.useState(null);
  const [preview, setPreview] = React.useState({ headers: [], rows: [] });
  const [showMore, setShowMore] = React.useState(false);
  const [showModal, setShowModal] = React.useState(false);
  const [adminPass, setAdminPass] = React.useState('');
  const [error, setError] = React.useState('');
  const [isAdmin, setIsAdmin] = React.useState(false);

  // Fetch CSV file list
  React.useEffect(() => {
    fetch('/api/datasets')
      .then(res => res.json())
      .then(data => setFiles(data.files || []));
  }, []);

  // Fetch preview rows
  const fetchPreview = (filename, rows = 5, password = null) => {
    setPreview({ headers: [], rows: [] });
    let headers = {};
    if (password) headers['x-admin-password'] = password;
    fetch(`/api/datasets/${filename}?rows=${rows}`, { headers })
      .then(res => res.json())
      .then(data => {
        setPreview({ headers: data.headers || [], rows: data.rows || [] });
        setIsAdmin(data.isAdmin || false);
      });
  };

  // Handle file click
  const handleFileClick = (f) => {
    setSelected(f);
    setShowMore(false);
    setIsAdmin(false);
    fetchPreview(f, 5);
  };

  // Handle show more
  const handleShowMore = () => setShowModal(true);

  // Handle admin login
  const handleAdminLogin = (e) => {
    e.preventDefault();
    fetchPreview(selected, 50, adminPass);
    setShowModal(false);
    setShowMore(true);
    setAdminPass('');
    setError('');
  };

  return (
    <div className="mb-16">
      <h3 className="text-3xl font-black text-black mb-6">ğŸ“‚ Dataset Preview</h3>
      <ul className="mb-6">
        {files.map(f => (
          <li key={f}>
            <button
              className={`flex items-center gap-2 py-2 text-lg font-bold text-black hover:text-orange-600 focus:outline-none bg-transparent ${selected===f?'text-orange-600':''}`}
              style={{background:'none',border:'none',outline:'none'}}
              onClick={()=>handleFileClick(f)}
            >
              <span className="text-2xl">ğŸ“Š</span> {f}
            </button>
          </li>
        ))}
      </ul>
      {selected && preview.headers.length > 0 && (
        <div className="bg-white p-0 rounded-xl">
          <div className="overflow-x-auto">
            <table className="min-w-max text-left">
              <thead>
                <tr>
                  {preview.headers.map((h,i)=>(
                    <th key={i} className="font-bold text-black px-3 py-2">{h}</th>
                  ))}
                </tr>
              </thead>
              <tbody>
                {preview.rows.map((row,i)=>(
                  <tr key={i} className="border-b border-gray-100">
                    {preview.headers.map((h,j)=>(
                      <td key={j} className="px-3 py-2 text-gray-800">{row[h]}</td>
                    ))}
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
          <div className="mt-2">
            {!showMore && (
              <button className="text-orange-600 font-bold text-sm hover:underline bg-transparent px-0 py-0" onClick={handleShowMore}>
                ğŸ”’ Show 50 Rows
              </button>
            )}
            {showMore && isAdmin && (
              <span className="text-green-600 font-bold text-sm">Showing 50 rows (admin)</span>
            )}
          </div>
        </div>
      )}
      {/* Modal for admin password */}
      {showModal && (
        <div className="fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50">
          <div className="bg-white rounded-xl p-8 w-full max-w-sm">
            <h2 className="text-2xl font-bold mb-4">Admin Access</h2>
            <form onSubmit={handleAdminLogin}>
              <input type="password" value={adminPass} onChange={e=>setAdminPass(e.target.value)} placeholder="Admin Password" className="w-full mb-3 px-3 py-2 rounded border border-gray-300" />
              <button type="submit" className="w-full bg-orange-500 text-white py-2 rounded font-bold">Unlock</button>
            </form>
            {error && <div className="text-red-600 mt-2">{error}</div>}
            <button className="mt-4 text-orange-600 hover:underline text-sm" onClick={()=>setShowModal(false)}>Close</button>
          </div>
        </div>
      )}
    </div>
  );
}

// --- Main App ---
function App() {
  // --- All your sections here ---
  // For brevity, I'll add placeholders for each section. You can fill in your logic as needed.
  return (
    <div className="min-h-screen bg-white">
      {/* Header */}
      <header className="flex items-center justify-between px-6 py-6">
        <div>
          <h1 className="text-4xl font-black text-black mb-1">
            Geospatial Tagging Thesis Progress
          </h1>
          <p className="text-lg text-gray-700 font-bold">
            Bayesian Elastic Net and Extended FP-Growth Approach
          </p>
        </div>
        <div className="flex items-center gap-4">
          <span className="text-3xl">ğŸ§‘â€ğŸ«</span>
          <span className="text-3xl">ğŸ‘¤</span>
        </div>
      </header>
      <div className="max-w-6xl mx-auto px-6 py-10">
        {/* Motivational Robot & Rotating Message */}
        <div className="text-center mb-16">
          <div className="flex justify-center items-center mb-8">
            <div className="relative">
              <div className="px-6 py-4 rounded-lg mb-4 max-w-sm bg-white border border-gray-200 shadow-none">
                <p className="font-bold text-black">
                  ğŸ˜Š Â¡Hola! Â¡Buena suerte con tu tesis!
                </p>
                <p className="text-sm text-gray-600 mt-1">
                  (Spanish)
                </p>
              </div>
              <div className="w-24 h-24 bg-gradient-to-br from-orange-400 to-orange-600 rounded-lg flex items-center justify-center mx-auto">
                <div className="text-3xl">ğŸ¤–</div>
              </div>
            </div>
          </div>
          {/* Progress Bar */}
          <div className="bg-white rounded-2xl p-12 mb-8">
            <h2 className="text-4xl font-black text-black mb-8">Research Progress</h2>
            <div className="mb-8">
              <div className="text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-orange-500 to-orange-600 mb-4">
                45%
              </div>
              <div className="relative w-full h-8 bg-gray-200 rounded-full overflow-hidden">
                <div
                  className="h-full bg-gradient-to-r from-orange-500 to-orange-600 transition-all duration-1000 ease-out"
                  style={{ width: `45%` }}
                ></div>
                <div className="absolute inset-0 flex items-center justify-center">
                  <div className="text-black font-bold text-sm">
                    45% Complete
                  </div>
                </div>
              </div>
            </div>
            <div className="p-6 rounded-xl mb-8 bg-gradient-to-r from-orange-200 to-yellow-100">
              <p className="text-xl font-bold text-orange-900">
                ğŸ’¡ Halfway there! Your insights are illuminating new paths!
              </p>
            </div>
            <button
              className="bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-full font-bold text-lg transition-colors disabled:opacity-50 shadow-none"
              title="Refresh Data"
            >
              <span className="inline-block mr-2">ğŸ”„</span>
              Refresh
            </button>
          </div>
        </div>
        {/* AI Wisdom */}
        <div className="bg-gradient-to-r from-orange-100 to-yellow-100 rounded-xl p-8 mb-8">
          <h3 className="text-2xl font-black text-black mb-4">ğŸ’¡ AI Wisdom</h3>
          <p className="text-lg text-gray-800 font-medium italic">
            "The best way to predict the future is to invent it." - Alan Kay
          </p>
        </div>
        {/* Latest Updates */}
        <div className="mb-8">
          <h3 className="text-3xl font-black text-black mb-6">ğŸ“¢ Latest Updates</h3>
          <div className="grid gap-6 md:grid-cols-2">
            <div className="bg-white rounded-xl p-6 border border-gray-200 shadow-none">
              <p className="text-gray-800 font-medium mb-3">Started data collection phase</p>
              <div className="flex justify-between items-center text-sm text-gray-600">
                <span className="font-bold">by Faizan</span>
                <span>2025-01-15</span>
              </div>
            </div>
            <div className="bg-white rounded-xl p-6 border border-gray-200 shadow-none">
              <p className="text-gray-800 font-medium mb-3">Completed literature review</p>
              <div className="flex justify-between items-center text-sm text-gray-600">
                <span className="font-bold">by Supervisor</span>
                <span>2025-01-10</span>
              </div>
            </div>
          </div>
        </div>
        {/* Commit Timeline (placeholder) */}
        <div className="bg-white rounded-xl p-8 mb-8">
          <div className="flex justify-between items-center mb-6">
            <h3 className="text-2xl font-black text-black">ğŸ•’ Commit Timeline (Last 10 Days)</h3>
            <button className="text-black hover:text-gray-600 text-2xl font-bold">âœ•</button>
          </div>
          <div className="overflow-x-auto">
            <p className="text-gray-500">[Commit grid will go here]</p>
          </div>
        </div>
        {/* Dataset Section */}
        <DatasetSection />
        {/* Footer */}
        <footer className="text-center py-8">
          <p className="text-xl font-bold text-black">ğŸ“ Thesis Progress Tracker â€¢ Built for Academic Excellence</p>
          <p className="text-gray-600 mt-2">Copyrights Batman of AI</p>
        </footer>
      </div>
    </div>
  );
}

ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
